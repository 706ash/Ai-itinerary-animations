<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maldives Ripple Typing</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.min.css"
        integrity="sha512-/VYneElp5u4puMaIp/4ibGxlTd2MV3kuUIroR3NSQjS2h9XKQNebRQiyyoQKeiGE9mRdjSCIZf9pb7AVJ8DhCg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@400;500;600;700;800;900&family=Poppins:wght@4400;500;600;700;800;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden; /* Prevent scrollbars */
        }

        body {
            font-family: "Poppins", sans-serif;
            background: #106667;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        main {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .swiper {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        .swiper-slide {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .bg {
            position: absolute;
            inset: 0;
        }

        .text {
            position: absolute;
            color: #fff;
            top: 50%;
            left: 10%;
            transform: translateY(-50%);
            padding: 40px;
            width: 600px;
            z-index: 10; /* Ensure text is above background */
        }
        .text h2 {
            font-size: 70px;
            font-weight: 900;
            line-height: 0.9;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            transform: translateY(200px);
            opacity: 0;
        }

        .text p {
            font-size: 12px;
            color: #fff;
            background: #fff;
            margin-top: 50px;
            padding: 40px;
            backdrop-filter: blur(2px);
            line-height: 1.7;
            color: #026179;
            position: relative;
            transform: translateY(200px);
            opacity: 0;
        }

        .text b {
            display: inline-block;
            font-size: 20px;
            text-transform: uppercase;
            font-weight: 900;
            opacity: 0.7;
            color: #026179;
            margin-bottom: 5px;
        }

        .text span {
            position: absolute;
            font-weight: 900;
            font-size: 70px;
            opacity: 0.1;
            top: -10px;
            right: 50px;
        }

        .swiper-button-next::after, .swiper-button-prev::after {
            display: none;
        }

        .swiper-button-next, .swiper-button-prev {
            font-size: 18px;
            height: 40px !important;
            width: 40px !important;
            display: grid;
            place-content: center;
            border-radius: 50%;
            background: #ffffff;
            color: #026179 !important;
            position: absolute;
            top: 92% !important;
        }

        .swiper-button-prev {
            left: 60% !important;
        }

        .swiper-button-next {
            right: 32% !important;
        }

        .swiper-pagination {
            position: absolute;
            top: 90% !important;
            bottom: auto !important;
        }
        .swiper-pagination-bullet {
            font-size: 12px;
            color: #fff;
            font-weight: bolder;
            opacity: 1 !important;
            margin-inline: 20px !important;
            background: none !important;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.4);
            transition: 0.3s ease;
        }

        .swiper-pagination-bullet-active {
            font-size: 14px;
        }

        nav {
            position: fixed;
            z-index: 100;
            font-size: 12px;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 40px 80px;
            gap: 20px;
        }

        nav a {
            text-decoration: none;
            color: #69d4ef;
            position: relative;
        }

        nav a.active {
            color: #fff;
        }

        nav a.active::after {
            content: "";
            position: absolute;
            width: 50px;
            height: 1px;
            background: #fff;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
        }

        .scroll {
            position: fixed;
            z-index: 100;
            bottom: 40px;
            right: 20px;
            background: rgba(255, 255, 255, 0.3);
            color: #fff;
            font-size: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform: rotate(-90deg);
            letter-spacing: 4px;
        }

        /* Typing Indicator and Chat Input Styles */
        #typing-indicator {
            width: 200px;
            height: 60px;
            background: rgba(0, 188, 212, 0.8); /* Slightly transparent */
            border-radius: 20px;
            position: fixed; /* Fixed position to overlay on Swiper */
            bottom: 100px; /* Adjust position as needed */
            left: 50%;
            transform: translateX(-50%);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 101; /* Above Swiper and nav */
        }

        #typing-indicator span {
            display: inline-block;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            margin: 0 5px;
            animation: bounce 1s infinite ease-in-out;
        }
        #typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        #typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0.8); }
            40% { transform: scale(1.2); }
        }

        #chat-input {
            width: 80%;
            max-width: 500px;
            min-height: 50px; /* Ensure enough height for contenteditable */
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.15); /* More transparent border */
            border-radius: 10px;
            font-size: 1.2em;
            outline: none;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); /* Enhanced shadow */
            background: rgba(255, 255, 255, 0.1); /* More transparent background */
            backdrop-filter: blur(10px); /* Glassmorphic blur effect */
            -webkit-backdrop-filter: blur(10px); /* For Safari */
            position: fixed; /* Fixed position to overlay on Swiper */
            bottom: 30px; /* Adjust position as needed */
            left: 50%;
            transform: translateX(-50%);
            z-index: 101; /* Above Swiper and nav */
            color: #fff; /* Text color for better contrast */
            white-space: pre-wrap; /* Preserve whitespace and allow wrapping */
            word-wrap: break-word; /* Break long words */
        }

        #chat-input:empty:before {
            content: attr(placeholder);
            color: rgba(255, 255, 255, 0.7);
        }
    </style>
</head>

<body>

    <main>
        <nav>
            <a href="#" class="active">WELCOME</a> 
            <a href="#">PRIVATE BEACHES</a>
            <a href="#">ACTIVITIES</a>
        </nav>
        <div class="container">
            <div class="swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <div class="bg" style="background: url('maldives.jpg') no-repeat; background-size: cover; ">
                        </div>
                        <div class="text">
                            <h2>WATER OF <br> MALDIVES</h2>
                            <p>
                                <span>01</span>
                                <b>Explore The Land</b>
                                <br>
                                The Residence Maldives at Falhumaafushi lies on an unspoilt island in
                                Gaafu Alifu Atoll, part of one of the largest and deepest atolls in the
                                Maldives, Huvadhoo. The 94 beach front and overwater villa resort is
                                an intimate retreat just 45 miles north of the Equator, renowned for its
                                unrivalled diving.
                            </p>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="bg"  style="background: url('images/2.jpg') no-repeat; background-size: cover; ">
                        </div>
                        <div class="text">
                            <h2>WATER OF <br> MALDIVES</h2>
                            <p>
                                <span>02</span>
                                <b>Explore The Land</b>
                                <br>
                                The Residence Maldives at Falhumaafushi lies on an unspoilt island in
                                Gaafu Alifu Atoll, part of one of the largest and deepest atolls in the
                                Maldives, Huvadhoo. The 94 beach front and overwater villa resort is
                                an intimate retreat just 45 miles north of the Equator, renowned for its
                                unrivalled diving.
                            </p>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="bg"  style="background: url('images/3.jpg') no-repeat; background-size: cover; ">
                        </div>
                        <div class="text">
                            <h2>WATER OF <br> MALDIVES</h2>
                            <p>
                                <span>03</span>
                                <b>Explore The Land</b>
                                <br>
                                The Residence Maldives at Falhumaafushi lies on an unspoilt island in
                                Gaafu Alifu Atoll, part of one of the largest and deepest atolls in the
                                Maldives, Huvadhoo. The 94 beach front and overwater villa resort is
                                an intimate retreat just 45 miles north of the Equator, renowned for its
                                unrivalled diving.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="swiper-button-next"><i class="ri-arrow-right-s-line"></i></div>
                <div class="swiper-button-prev"><i class="ri-arrow-left-s-line"></i></div>
                <div class="swiper-pagination"></div>
            </div>
        </div>
        <div class="scroll">
            <span>SCROLL DOWN</span>
        </div>
    </main>

    <div id="typing-indicator">
        <span></span><span></span><span></span>
    </div>

    <div id="chat-input" contenteditable="true" placeholder="Type your message here..."></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" integrity="sha512-16esztaSRplJROstbIIdwX3N97V1+pZvV33ABoG1H2OyTttBxEGkTsoIVsiP1iaTtM8b3+hu2kB6pQ4Clr5yug==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="jquery.ripples.js"></script>
    <script>

        gsap.from(".bg", {
            opacity: 0,
            duration: 2
        })
        gsap.to(".text h2", {
            y: 0,
            duration: 0.9,
            opacity: 1,
            delay: 0.5
        })
        gsap.to(".text p", {
            y: 0,
            duration: 0.9,
            opacity: 1,
            delay: 0.5
        })

        // Initialize ripples on all .bg elements
        $(".swiper-slide .bg").ripples({
            resolution: 1080,
            perturbance: 0.02,
            interactive: false // Set to false to control programmatically
        });

        var swiper = new Swiper(".swiper", {
            direction: "horizontal",
            mousewheel: true,
            speed: 1200,
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
                renderBullet: function (index, className) {
                    return '<span class="' + className + '"> 0' + (index + 1) + "</span>";
                },
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            effect: "creative",
            creativeEffect: {
                prev: {
                    shadow: true,
                    translate: [0, 0, -400],
                },
                next: {
                    translate: ["100%", 0, 0],
                },
            },
        });

        // Function to get caret coordinates
        function getCaretCoordinates() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0).cloneRange();
                range.collapse(false); // Collapse to the end of the range (caret position)
                const rect = range.getClientRects()[0];
                if (rect) {
                    return { x: rect.left, y: rect.top };
                }
            }
            return null;
        }

        // Listen for input events on the contenteditable div
        $('#chat-input').on('input', function(e) {
            const activeSlideBg = swiper.slides[swiper.activeIndex].querySelector('.bg');
            
            if (activeSlideBg) {
                const ripplesInstance = $(activeSlideBg).data('ripples');

                if (ripplesInstance) {
                    const caretCoords = getCaretCoordinates();

                    if (caretCoords) {
                        // Get the position of the active background element relative to the viewport
                        const bgOffset = $(activeSlideBg).offset();

                        // Calculate ripple coordinates relative to the background element
                        const rippleX = caretCoords.x - bgOffset.left;
                        const rippleY = caretCoords.y - bgOffset.top;

                        // Trigger a ripple at the caret's position
                        ripplesInstance.drop(rippleX, rippleY, 20, 0.04); // Adjust radius/perturbance as needed
                    }
                }
            }
        });

        // Handle placeholder for contenteditable div
        const chatInputDiv = document.getElementById('chat-input');
        chatInputDiv.addEventListener('focus', function() {
            if (this.textContent === this.getAttribute('placeholder')) {
                this.textContent = '';
                this.classList.remove('placeholder-active');
            }
        });
        chatInputDiv.addEventListener('blur', function() {
            if (this.textContent === '') {
                this.textContent = this.getAttribute('placeholder');
                this.classList.add('placeholder-active');
            }
        });
        // Initial placeholder setup
        if (chatInputDiv.textContent === '') {
            chatInputDiv.textContent = chatInputDiv.getAttribute('placeholder');
            chatInputDiv.classList.add('placeholder-active');
        }
    </script>
</body>

</html>